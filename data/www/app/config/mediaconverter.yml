mittax_mediaconverter:
  #####################################################
  # Place you blackfire tokens here
  #####################################################
  profilers:
    blackfire:
      clientId: 14098fc9-593f-4784-ba38-9dc0357b161e
      clientToken: 0f04047091346ab64c291d6486f1f13df0eada39928c2deb062100c0e676e098
  functionaltests:
    executeThumbnailGeneration: true
  #####################################################
  # Converters registered here
  #####################################################
  converters:
    ffmpeg:
      name: ffmpeg
      version: 0.0.1
      thumbnailConverterClassName: Mittax\MediaConverterBundle\Repository\Converter\Thumbnail\Ffmpeg\Converter
      producerClassName: Mittax\MediaConverterBundle\Repository\Converter\Thumbnail\Ffmpeg\ThumbnailTicket\Producer
      #these formats will be generated by default
      thumbnailOutputFormat:
          - { 'format': 'jpg', 'filter': '', 'quality': ['jpeg_quality', 80], sizes: [{'width': 500, 'height': 500}], 'mode': 'inset', 'additionalFilter': ''}
          #- { 'format': 'png', 'filter': '', 'quality': ['png_compression_level', 2], sizes: [{'width': 500, 'height': 500}, {'width': 600, 'height': 600}], 'mode': 'inset', 'additionalFilter': ''}

      executable: { os: /usr/bin/ffmpeg}
      formats: mkv,roq,ac3,aiff,alaw,alsa,amr,asf,ass,au,avi,dau,dirac,dnxh,dts,dv,eac3,f32be,f32le,f64be,f64le,ffm,flac,flv,gxf,h261,h263,h264,image2,image2pipe,m4v,matroska,mjpeg,mmf,mp3,mpeg,mpegts,mulaw,mxf,nut,ogg,oss,rawvi,rm,s16be,s16le,s24be,s24le,s32be,s32le,s8,swf,u16be,u16le,u24be,u24le,u32be,u32le,u8,voc,wav,yuv4mpegpipe,3g2,3gp,4xm,iff,iss,mtv,aac,adts,apc,ape,asf_stream,avm2,avs,bethsoftvi,bfi,c93,cavsvi,crc,dsicin,dv1394,dv,dxa,a,a_cdata,film_cpk,framecrc,gsm,idcin,ingenient,ipmovie,ipo,libdc1394,lmlm4,mlp,mm,mov,mp2,mp4,mpc,mpc8,mpeg1vi,mpeg2vi,mpegtsraw,mpegvi,mpjpeg,msnwctcp,mvi,mxf_d10,nc,nsv,null,nuv,oma,psp,psxstr,pva,r3,rcv,redir,rl2,rpl,rtp,rtsp,sdp,shn,siff,smk,sol,svc,thp,tiertexseq,tta,tx,vc1,vc1test,vc,vi,vi,vm,vob,wc3movie,wsau,wsvqa,wv,x11grab,xa,mp4,m4a,3gp,3g2,mj2,divx,wmv

    # Imagine is a php wrapper for GD / imagemagick
    imagine:
      name: imagine
      version: 0.0.1
      thumbnailConverterClassName: Mittax\MediaConverterBundle\Repository\Converter\Thumbnail\Imagine\Converter
      producerClassName: Mittax\MediaConverterBundle\Repository\Converter\Thumbnail\Imagine\Ticket\Producer
      thumbnailOutputFormat:
          #- { 'format': 'jpg', 'filter': '', 'quality': ['jpeg_quality', 80], sizes: [{'width': 500, 'height': 500}], 'mode': 'inset', 'additionalFilter': ''}
          - { 'format': 'png', 'filter': '', 'quality': ['png_compression_level', 10], sizes: [{'width': 500, 'height': 500}], 'mode': 'inset', 'additionalFilter': ''}
      executable: { phpextension: [imagick, gd]}
      formats: art,ai,avs,bmp,cgm,cmyk,cut,dcm,dcx,dib,dpx,emf,epdf,epi,eps,eps2,eps3,epsf,epsi,ept,fax,fig,fits,fpx,gif,gplt,gray,hpgl,html,ico,jbig,jng,jp2,jpc,jpg,jpeg,man,mat,miff,mono,mng,mpeg,m2v,mpc,msl,mtv,mvg,otb,p7,palm,pbm,pcd,pcds,pcl,pcx,pdb,pdf,pfa,pfb,pgm,picon,pict,pix,png,pnm,ppm,ps,ps2,ps3,psd,ptif,pwp,rad,rgb,rgba,rla,rle,sct,sfw,sgi,shtml,sun,svg,tga,tif,tiff,tim,ttf,txt,uil,uyvy,vicar,viff,wbmp,wmf,wpg,xbm,xpm,xwd,yuv

    # Adds InDesignServer Thumbnail generation
    indesign:
      name: indesign
      version: 0.0.1
      thumbnailConverterClassName: Mittax\MediaConverterBundle\Repository\Converter\Thumbnail\InDesign\Converter
      producerClassName: Mittax\MediaConverterBundle\Repository\Converter\Thumbnail\InDesign\Ticket\Producer
      thumbnailOutputFormat:
          - { 'format': 'jpg', 'filter': '', 'quality': ['jpeg_quality', 80], sizes: [{'width': 500, 'height': 500}], 'mode': 'inset', 'additionalFilter': ''}
            # - { 'format': 'png', 'filter': '', 'quality': ['png_compression_level', 10], sizes: [{'width': 500, 'height': 500}, {'width': 600, 'height': 600}], 'mode': 'inset', 'additionalFilter': ''}
      executable: { phpextension: [imagick, gd]}
      formats: indd,indb,indb.zip

  ##################################################
  # Registered systempaths
  #####################################################
  paths:
    #used for generation
    temp: storage/temp
    #final filesystemstructure
    storage:
      path: /var/www/storage
      resolver: Mittax\MediaConverterBundle\Service\Storage\Local\Resolver
      public_url: http://172.17.0.1:8181
      upload: /var/www/storage/upload
      export: /var/www/storage/export
  ##################################################
  # InDesignServer Share configuration
  #####################################################
    indesign_server:
       root: \\vmware-host\Shared Folders\shared_storage
       export: ${root}\export
       assets: ${root}\assets
       webhook_client_urls:
        - http://172.17.0.1:8089/webhooks/indesignserver
    public_web_url: http://172.17.0.1:8089
    public_websocket_url: ws://172.17.0.1:8889



#####################################################
# RabbitMQ-Producer / Consumers
#####################################################
  exchangeConfiguration:
    producers:
      thumbnails:
        # Chanel to generate thumbnails from images
        imagine:
          name: e_imagine_thumbnails
          queueName: q_imagine_thumbnails
          routingKey: r_imagine_thumbnails
          type: direct
          auto_delete: false
          durable: true
          passive: false
          parameters: []
          nowait: true
          exclusive: false
        # Chanel to generate thumbnails from videos
        ffmpeg:
          name: e_ffmpeg_thumbnails
          queueName: q_ffmpeg_thumbnails
          routingKey: r_ffmpeg_thumbnails
          type: direct
          auto_delete: false
          durable: true
          passive: false
          parameters: []
          nowait: true
          exclusive: false
        # Chanel to generate lowres videos
        ffmpeg.lowres:
          name: e_ffmpeg_lowres
          queueName: q_ffmpeg_lowres
          routingKey: r_ffmpeg_lowres
          type: direct
          auto_delete: false
          durable: true
          passive: false
          parameters: []
          nowait: true
          exclusive: false
        Indd:
          name: Indd
          queueName: JobIn1
          routingKey: JobIn1
          type: direct
          auto_delete: false
          durable: true
          passive: false
          parameters: []
          nowait: true
          exclusive: false
      # Chanel to generate lowres videos
        metadata.extract:
          name: e_metadata_extract
          queueName: q_metadata_extract
          routingKey: r_metadata_extract
          type: direct
          auto_delete: false
          durable: true
          passive: false
          parameters: []
          nowait: true
          exclusive: false
    consumers:
      Mittax\RabbitMQBundle\Service\Consumer\Configuration\Basic:
        queue: q_thumbnails
        consumer_tag: thumbnailconsumer
        no_local: false
        no_ack: false
        exclusive: false
        nowait: false
      #if activated, you can autostart consumer cli processes
    autostartConsumers:
      active: true
      instances: 1 #10 consumers started automaticly

